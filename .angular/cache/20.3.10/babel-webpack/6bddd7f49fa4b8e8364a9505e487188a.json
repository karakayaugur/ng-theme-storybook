{"ast":null,"code":"import _asyncToGenerator from \"/Users/ugurcakil/Documents/projects/ugurk/ng-theme-storybook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __name } from \"./chunk-MM7DTO55.js\";\n\n// src/preview-api/modules/preview-web/render/animation-utils.ts\nvar ANIMATION_TIMEOUT = 5e3;\nfunction isTestEnvironment() {\n  try {\n    return (\n      // @ts-expect-error This property exists in Vitest browser mode\n      !!globalThis.__vitest_browser__ || !!globalThis.window?.navigator?.userAgent?.match(/StorybookTestRunner/)\n    );\n  } catch {\n    return false;\n  }\n}\n__name(isTestEnvironment, \"isTestEnvironment\");\nfunction pauseAnimations(atEnd = true) {\n  if (!(\"document\" in globalThis && \"createElement\" in globalThis.document)) {\n    return () => {};\n  }\n  const disableStyle = document.createElement(\"style\");\n  disableStyle.textContent = `*, *:before, *:after {\n    animation: none !important;\n  }`;\n  document.head.appendChild(disableStyle);\n  const pauseStyle = document.createElement(\"style\");\n  pauseStyle.textContent = `*, *:before, *:after {\n    animation-delay: 0s !important;\n    animation-direction: ${atEnd ? \"reverse\" : \"normal\"} !important;\n    animation-play-state: paused !important;\n    transition: none !important;\n  }`;\n  document.head.appendChild(pauseStyle);\n  document.body.clientHeight;\n  document.head.removeChild(disableStyle);\n  return () => {\n    pauseStyle.parentNode?.removeChild(pauseStyle);\n  };\n}\n__name(pauseAnimations, \"pauseAnimations\");\nfunction waitForAnimations(_x) {\n  return _waitForAnimations.apply(this, arguments);\n}\nfunction _waitForAnimations() {\n  _waitForAnimations = _asyncToGenerator(function* (signal) {\n    if (!(\"document\" in globalThis && \"getAnimations\" in globalThis.document && \"querySelectorAll\" in globalThis.document)) {\n      return;\n    }\n    let timedOut = false;\n    yield Promise.race([\n    // After 50ms, retrieve any running animations and wait for them to finish\n    // If new animations are created while waiting, we'll wait for them too\n    new Promise(resolve => {\n      setTimeout(() => {\n        const animationRoots = [globalThis.document, ...getShadowRoots(globalThis.document)];\n        const checkAnimationsFinished = /* @__PURE__ */__name(/*#__PURE__*/_asyncToGenerator(function* () {\n          if (timedOut || signal?.aborted) {\n            return;\n          }\n          const runningAnimations = animationRoots.flatMap(el => el?.getAnimations?.() || []).filter(a => a.playState === \"running\" && !isInfiniteAnimation(a));\n          if (runningAnimations.length > 0) {\n            yield Promise.all(runningAnimations.map(a => a.finished));\n            yield checkAnimationsFinished();\n          }\n        }), \"checkAnimationsFinished\");\n        checkAnimationsFinished().then(resolve);\n      }, 100);\n    }),\n    // If animations don't finish within the timeout, continue without waiting\n    new Promise(resolve => setTimeout(() => {\n      timedOut = true;\n      resolve(void 0);\n    }, ANIMATION_TIMEOUT))]);\n  });\n  return _waitForAnimations.apply(this, arguments);\n}\n__name(waitForAnimations, \"waitForAnimations\");\nfunction getShadowRoots(doc) {\n  return [doc, ...doc.querySelectorAll(\"*\")].reduce((acc, el) => {\n    if (\"shadowRoot\" in el && el.shadowRoot) {\n      acc.push(el.shadowRoot, ...getShadowRoots(el.shadowRoot));\n    }\n    return acc;\n  }, []);\n}\n__name(getShadowRoots, \"getShadowRoots\");\nfunction isInfiniteAnimation(anim) {\n  if (anim instanceof CSSAnimation && anim.effect instanceof KeyframeEffect && anim.effect.target) {\n    const style = getComputedStyle(anim.effect.target, anim.effect.pseudoElement);\n    const index = style.animationName?.split(\", \").indexOf(anim.animationName);\n    const iterations = style.animationIterationCount.split(\", \")[index];\n    return iterations === \"infinite\";\n  }\n  return false;\n}\n__name(isInfiniteAnimation, \"isInfiniteAnimation\");\nexport { isTestEnvironment, pauseAnimations, waitForAnimations };","map":{"version":3,"names":["__name","ANIMATION_TIMEOUT","isTestEnvironment","globalThis","__vitest_browser__","window","navigator","userAgent","match","pauseAnimations","atEnd","document","disableStyle","createElement","textContent","head","appendChild","pauseStyle","body","clientHeight","removeChild","parentNode","waitForAnimations","_x","_waitForAnimations","apply","arguments","_asyncToGenerator","signal","timedOut","Promise","race","resolve","setTimeout","animationRoots","getShadowRoots","checkAnimationsFinished","aborted","runningAnimations","flatMap","el","getAnimations","filter","a","playState","isInfiniteAnimation","length","all","map","finished","then","doc","querySelectorAll","reduce","acc","shadowRoot","push","anim","CSSAnimation","effect","KeyframeEffect","target","style","getComputedStyle","pseudoElement","index","animationName","split","indexOf","iterations","animationIterationCount"],"sources":["/Users/ugurcakil/Documents/projects/ugurk/ng-theme-storybook/node_modules/storybook/dist/_browser-chunks/chunk-LYCSRYYR.js"],"sourcesContent":["import {\n  __name\n} from \"./chunk-MM7DTO55.js\";\n\n// src/preview-api/modules/preview-web/render/animation-utils.ts\nvar ANIMATION_TIMEOUT = 5e3;\nfunction isTestEnvironment() {\n  try {\n    return (\n      // @ts-expect-error This property exists in Vitest browser mode\n      !!globalThis.__vitest_browser__ || !!globalThis.window?.navigator?.userAgent?.match(/StorybookTestRunner/)\n    );\n  } catch {\n    return false;\n  }\n}\n__name(isTestEnvironment, \"isTestEnvironment\");\nfunction pauseAnimations(atEnd = true) {\n  if (!(\"document\" in globalThis && \"createElement\" in globalThis.document)) {\n    return () => {\n    };\n  }\n  const disableStyle = document.createElement(\"style\");\n  disableStyle.textContent = `*, *:before, *:after {\n    animation: none !important;\n  }`;\n  document.head.appendChild(disableStyle);\n  const pauseStyle = document.createElement(\"style\");\n  pauseStyle.textContent = `*, *:before, *:after {\n    animation-delay: 0s !important;\n    animation-direction: ${atEnd ? \"reverse\" : \"normal\"} !important;\n    animation-play-state: paused !important;\n    transition: none !important;\n  }`;\n  document.head.appendChild(pauseStyle);\n  document.body.clientHeight;\n  document.head.removeChild(disableStyle);\n  return () => {\n    pauseStyle.parentNode?.removeChild(pauseStyle);\n  };\n}\n__name(pauseAnimations, \"pauseAnimations\");\nasync function waitForAnimations(signal) {\n  if (!(\"document\" in globalThis && \"getAnimations\" in globalThis.document && \"querySelectorAll\" in globalThis.document)) {\n    return;\n  }\n  let timedOut = false;\n  await Promise.race([\n    // After 50ms, retrieve any running animations and wait for them to finish\n    // If new animations are created while waiting, we'll wait for them too\n    new Promise((resolve) => {\n      setTimeout(() => {\n        const animationRoots = [globalThis.document, ...getShadowRoots(globalThis.document)];\n        const checkAnimationsFinished = /* @__PURE__ */ __name(async () => {\n          if (timedOut || signal?.aborted) {\n            return;\n          }\n          const runningAnimations = animationRoots.flatMap((el) => el?.getAnimations?.() || []).filter((a) => a.playState === \"running\" && !isInfiniteAnimation(a));\n          if (runningAnimations.length > 0) {\n            await Promise.all(runningAnimations.map((a) => a.finished));\n            await checkAnimationsFinished();\n          }\n        }, \"checkAnimationsFinished\");\n        checkAnimationsFinished().then(resolve);\n      }, 100);\n    }),\n    // If animations don't finish within the timeout, continue without waiting\n    new Promise(\n      (resolve) => setTimeout(() => {\n        timedOut = true;\n        resolve(void 0);\n      }, ANIMATION_TIMEOUT)\n    )\n  ]);\n}\n__name(waitForAnimations, \"waitForAnimations\");\nfunction getShadowRoots(doc) {\n  return [doc, ...doc.querySelectorAll(\"*\")].reduce((acc, el) => {\n    if (\"shadowRoot\" in el && el.shadowRoot) {\n      acc.push(el.shadowRoot, ...getShadowRoots(el.shadowRoot));\n    }\n    return acc;\n  }, []);\n}\n__name(getShadowRoots, \"getShadowRoots\");\nfunction isInfiniteAnimation(anim) {\n  if (anim instanceof CSSAnimation && anim.effect instanceof KeyframeEffect && anim.effect.target) {\n    const style = getComputedStyle(anim.effect.target, anim.effect.pseudoElement);\n    const index = style.animationName?.split(\", \").indexOf(anim.animationName);\n    const iterations = style.animationIterationCount.split(\", \")[index];\n    return iterations === \"infinite\";\n  }\n  return false;\n}\n__name(isInfiniteAnimation, \"isInfiniteAnimation\");\n\nexport {\n  isTestEnvironment,\n  pauseAnimations,\n  waitForAnimations\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}